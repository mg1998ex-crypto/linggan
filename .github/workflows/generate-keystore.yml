name: 生成签名 keystore（只运行一次）

on:
  workflow_dispatch:

jobs:
  gen:
    runs-on: ubuntu-latest
    steps:
      - name: 安装 Java
        uses: actions/setup-java@v4
        with:
          distribution: temurin
          java-version: 17

      - name: 生成 keystore
        run: |
          keytool -genkeypair \
            -alias linggan \
            -keyalg RSA \
            -keysize 2048 \
            -validity 10000 \
            -keystore linggan.keystore \
            -storepass linggan123 \
            -keypass linggan123 \
            -dname "CN=Linggan, OU=Linggan, O=Linggan, L=Beijing, ST=Beijing, C=CN"

      - name: 上传 keystore
        uses: actions/upload-artifact@v4
        with:
          name: linggan-keystore
          path: linggan.keystore